<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½¿ç”¨ä»‹ç»</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: #f5f7fb;
          min-height: 100vh;
        }
        nav {
          background: #ffffff;
          border-bottom: 1px solid #e5e7eb;
          box-shadow: 0 6px 18px rgba(0,0,0,0.05);
        }
        nav .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 15px 30px; }
        nav .logo { color: #111827; font-size: 1.6em; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        nav .nav-links { display: flex; gap: 15px; }
        nav .nav-btn { background: transparent; color: #4b5563; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; font-size: 0.95em; transition: all 0.2s; font-weight: 600; text-decoration: none; }
        nav .nav-btn:hover { background: #eef2ff; color: #4338ca; transform: translateY(-1px); }
        nav .nav-btn.active { background: #4338ca; color: #ffffff; }
        .lang-toggle { background: #f3f4f6; color: #374151; padding: 6px 12px; border-radius: 6px; font-size: 0.85em; cursor: pointer; border: 1px solid #d1d5db; transition: all 0.2s; }
        .lang-toggle:hover { background: #e5e7eb; }
        .container { max-width: 960px; margin: 0 auto; padding: 40px 20px; }
        .card { background: white; border-radius: 14px; padding: 36px; box-shadow: 0 12px 30px rgba(0,0,0,0.08); margin-bottom: 30px; border: 1px solid #e5e7eb; }
        .card h2 { color: #333; margin-bottom: 25px; font-size: 2em; border-bottom: 3px solid #4338ca; padding-bottom: 15px; }
        .intro-section { margin-bottom: 28px; }
        .intro-section h3 { color: #333; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .intro-section p { color: #444; line-height: 1.6; margin-bottom: 8px; }
        .intro-section ul { margin-left: 18px; color: #444; line-height: 1.6; }
        .intro-section ol { margin-left: 18px; color: #444; line-height: 1.6; }
        .code-example {
            background: #0f172a;
            color: #e5e7eb;
            padding: 14px 16px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.93em;
            line-height: 1.55;
            white-space: pre;
            overflow: auto;
            border: 1px solid #1e293b;
        }
        table { border-collapse: collapse; width: 100%; font-size: 0.95em; }
        th, td { border: 1px solid #ddd; padding: 8px 10px; text-align: left; }
        th { background: #f7f7f7; }
        @media (max-width: 768px) { nav .nav-container { flex-direction: column; gap: 15px; } nav .nav-links { width: 100%; justify-content: center; } .container { padding: 20px 15px; } .card { padding: 25px 20px; } }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <div class="logo">ğŸ”—<span data-zh="Chiam's è®¢é˜…è½¬æ¢" data-en="Chiam's Sub Converter">Chiam's è®¢é˜…è½¬æ¢</span></div>
            <div class="nav-links">
                <a class="nav-btn" href="/index.html" data-zh="è½¬æ¢" data-en="Convert">è½¬æ¢</a>
                <a class="nav-btn" href="/scripts.html" data-zh="è„šæœ¬" data-en="Scripts">è„šæœ¬</a>
                <a class="nav-btn active" href="/docs.html" data-zh="ä»‹ç»" data-en="Docs">ä»‹ç»</a>
                <button class="lang-toggle" onclick="toggleLang()">ä¸­/EN</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="card">
            <h2 data-zh="ğŸ“– ä½¿ç”¨ä»‹ç»" data-en="ğŸ“– Documentation">ğŸ“– ä½¿ç”¨ä»‹ç»</h2>

            <div class="intro-section">
                <h3 data-zh="ğŸš€ å·²å®ç°åŠŸèƒ½" data-en="ğŸš€ Implemented Features">ğŸš€ å·²å®ç°åŠŸèƒ½</h3>
                <ul>
                    <li>/convertï¼šGETï¼Œå¿…å¡« script/subï¼Œå¯é€‰ filenameï¼›æ”¯æŒ data=Base64 æ‰“åŒ… script/sub/filename</li>
                    <li>/api/scriptsï¼šåˆ—å‡ºã€è·å–ã€ä¿å­˜ï¼ˆè¯­æ³•æ ¡éªŒåè½ç›˜ï¼‰ã€åˆ é™¤ data/scripts/*.js</li>
                    <li>è¾“å‡ºä¸€å¾‹ä¸º text/yamlï¼Œæ–‡ä»¶åç”¨ RFC5987 ç¼–ç ï¼Œé»˜è®¤ subscription.yaml</li>
                    <li>å¥åº·æ£€æŸ¥ï¼š/health è¿”å›çŠ¶æ€ä¸æ—¶é—´æˆ³</li>
                    <li>é™æ€é¡µé¢ï¼šindex.htmlï¼ˆç”Ÿæˆé“¾æ¥ï¼‰ã€scripts.htmlï¼ˆè„šæœ¬ç®¡ç†ï¼‰ã€docs.htmlï¼ˆè¯´æ˜ï¼‰</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>ğŸ“‹ åŸºæœ¬æµç¨‹</h3>
                <ol>
                    <li>åœ¨â€œè„šæœ¬â€é¡µä¿å­˜è„šæœ¬ï¼ˆæ–‡æœ¬å¤„ç†æˆ– Clash é…ç½®å¤„ç†ï¼‰</li>
                    <li>åœ¨â€œè½¬æ¢â€é¡µé€‰æ‹©è„šæœ¬ï¼Œè¾“å…¥è®¢é˜…é“¾æ¥ï¼Œå¯é€‰æ–‡ä»¶åï¼Œç”Ÿæˆé“¾æ¥</li>
                    <li>å°†ç”Ÿæˆçš„ /convert é“¾æ¥ç²˜è´´åˆ° Clash ç­‰å®¢æˆ·ç«¯è®¢é˜…åœ°å€ä¸­</li>
                </ol>
            </div>

            <div class="intro-section">
                <h3>âš™ï¸ å‚æ•°è¯´æ˜</h3>
                <ul>
                    <li>scriptï¼šè„šæœ¬åï¼ˆå¯¹åº” data/scripts/<name>.jsï¼‰</li>
                    <li>subï¼šåŸå§‹è®¢é˜… URLï¼ˆå¿…å¡«ï¼Œå»ºè®®å…ˆæµ‹è¯•å¯ç›´æ¥è®¿é—®ï¼‰</li>
                    <li>filenameï¼šå¯¼å‡ºæ–‡ä»¶åï¼ˆå¯é€‰ï¼Œé»˜è®¤ subscription.yamlï¼‰</li>
                    <li>dataï¼šå¯é€‰ï¼Œå°† script/sub/filename ç»„æˆæŸ¥è¯¢ä¸²åå† Base64 å’Œ URL ç¼–ç </li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>ğŸ” ç¼–ç æ–¹æ¡ˆ</h3>
                <ul>
                    <li>URL æ¨¡å¼ï¼š/convert?script=xxx&sub=yyy[&filename=zzz]</li>
                    <li>Base64 æ¨¡å¼ï¼š/convert?data=BASE64(queryString)ï¼Œç”¨äºé¿å… HTTPS è®¢é˜…åµŒå¥—</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>ğŸŒ è°ƒç”¨æ ¼å¼</h3>
                <p><strong>URL æ¨¡å¼ï¼š</strong></p>
                <div class="code-example">http://your-domain:3005/convert?script=è„šæœ¬å&sub=åŸå§‹è®¢é˜…URL&filename=é…ç½®.yaml</div>
                <p><strong>Base64 æ¨¡å¼ï¼š</strong></p>
                <div class="code-example">http://your-domain:3005/convert?data=BASE64( script=è„šæœ¬å&sub=åŸå§‹è®¢é˜…URL&filename=é…ç½®.yaml )</div>
                <p style="margin-top: 12px; color: #666;">Base64 ç»“æœå†åš URL ç¼–ç åæ”¾å…¥ dataï¼›filename å¯çœç•¥ã€‚</p>
            </div>

            <div class="intro-section">
                <h3>ğŸ“ è„šæœ¬æ‰§è¡Œä¸è¿”å›å€¼</h3>
                <ul>
                    <li>æ–‡æœ¬è„šæœ¬ï¼šå‡½æ•°ç­¾å (content) => stringï¼Œè¿”å›å­—ç¬¦ä¸²</li>
                    <li>Clash è„šæœ¬ï¼šå‡½æ•°ç­¾å main(config)ï¼Œè¿”å›å¯¹è±¡ï¼Œè‡ªåŠ¨è½¬ YAML</li>
                    <li>åˆ¤å®šé€»è¾‘ï¼šèƒ½è¢« YAML/JSON è§£æåˆ™æŒ‰ Clash æ¨¡å¼è°ƒç”¨ mainï¼›å¦åˆ™æŒ‰æ–‡æœ¬æ¨¡å¼</li>
                    <li>æ‰§è¡Œæ–¹å¼ï¼šnew Function åœ¨åŒä¸€ Node è¿›ç¨‹å†…è¿è¡Œï¼Œæœªåšæ²™ç®±éš”ç¦»ï¼›require/Buffer/fs ç­‰ Node å…¨å±€å¯ç”¨</li>
                    <li>é”™è¯¯å›é€€ï¼šè„šæœ¬æŠ›é”™æˆ–è§£æå¤±è´¥ä¼šå›é€€åŸå§‹è®¢é˜…å†…å®¹</li>
                </ul>
                <p><strong>ç¤ºä¾‹1 - çº¯æ–‡æœ¬è®¢é˜…æ¸…ç†</strong></p>
                <div class="code-example">// ç§»é™¤ç©ºè¡Œå’Œæ³¨é‡Š
return content.split('\n')
  .filter(line => line.trim() && !line.startsWith('#'))
  .join('\n');</div>
                <p><strong>ç¤ºä¾‹2 - Clash é…ç½®åŠ å·¥</strong></p>
                <div class="code-example">function main(config) {
  config.proxies = (config.proxies || []).filter(p => p.name && !p.name.includes('è¿‡æœŸ'));
  config['proxy-groups'] = config['proxy-groups'] || [];
  config['proxy-groups'].push({ name: 'èŠ‚ç‚¹é€‰æ‹©', type: 'select', proxies: (config.proxies || []).map(p => p.name) });
  config.rules = config.rules || [];
  config.rules.unshift('DOMAIN-SUFFIX,example.com,èŠ‚ç‚¹é€‰æ‹©');
  return config;
}</div>
            </div>

            <div class="intro-section">
                <h3>ğŸ§­ Clash å¤„ç†è¦ç‚¹</h3>
                <ul>
                    <li>åŠ¡å¿…è¿”å›å®Œæ•´çš„é…ç½®å¯¹è±¡ï¼ˆä¿ç•™åŸæœ‰å­—æ®µï¼ŒæŒ‰éœ€ä¿®æ”¹ï¼‰</li>
                    <li>ä¿®æ”¹åˆ—è¡¨å‰å…ˆå…œåº•ï¼šconfig.rules = config.rules || [];</li>
                    <li>æ–°å¢å­—æ®µç›´æ¥æŒ‚åœ¨ config ä¸Šï¼ŒYAML ä¼šè‡ªåŠ¨ç”Ÿæˆ</li>
                    <li>ä¸ä¼šä¿ç•™åŸå§‹ YAML æ³¨é‡Š</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>ğŸ“¦ é¢„ç½®è„šæœ¬</h3>
                <ul>
                    <li>minifyï¼šå»ç©ºè¡Œ/æ³¨é‡Šï¼Œå‹ç¼©æ–‡æœ¬è®¢é˜…</li>
                    <li>ss-vmess-onlyï¼šåªä¿ç•™ ss:// ä¸ vmess://ï¼Œé™„åŠ ç»Ÿè®¡æ³¨é‡Š</li>
                    <li>geo-priorityï¼šæŒ‰åœ°åŒºåˆ†ç»„æµ‹é€Ÿï¼ˆæ¸¯/æ–°/æ—¥/ç¾ï¼‰ï¼Œå›½è¡Œç›´è¿å…œåº•</li>
                    <li>acl-miniï¼šæç®€åˆ†æµï¼Œå¹¿å‘Šæ‹’ç» + GFW ä»£ç† + ä¸­å›½åŸŸåç›´è¿</li>
                    <li>acl-liteï¼šå¸¸è§„åˆ†æµï¼Œå«åª’ä½“/ç”µæŠ¥è§„åˆ™é›†ä¸åŸºç¡€ç­–ç•¥ç»„</li>
                    <li>clash-fullï¼šæ³¨å…¥åŸºç¡€è§„åˆ™ã€åˆ†ç»„ä¸åœ¨çº¿è§„åˆ™æä¾›è€…ï¼Œé€‚åˆå¸¸è§„åˆ†æµ</li>
                    <li>clash-proï¼šæ›´ç»†åˆ†çš„ç­–ç•¥ç»„ä¸è§„åˆ™ï¼Œå«å¹¿å‘Š/éšç§è§„åˆ™ä¸ç¤ºä¾‹èŠ‚ç‚¹æ³¨å…¥</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>ğŸ’¡ å¸¸è§é—®é¢˜</h3>
                <ul>
                    <li>æ‹‰å–å¤±è´¥ï¼šHTTPS åµŒå¥—æˆ–è®¢é˜…æœ‰é‡å®šå‘æ—¶ï¼Œç”¨ Base64 æ¨¡å¼</li>
                    <li>æ–‡ä»¶åä¹±ç ï¼šå¡« filenameï¼›æœåŠ¡ç«¯ä½¿ç”¨ RFC5987 å¤„ç†å¯¼å‡ºå</li>
                    <li>è„šæœ¬æœªç”Ÿæ•ˆï¼šä¿å­˜ååœ¨â€œè½¬æ¢â€é¡µåˆ·æ–°è„šæœ¬ä¸‹æ‹‰ï¼Œå†é‡æ–°ç”Ÿæˆé“¾æ¥</li>
                    <li>å®‰å…¨æ€§ï¼šè„šæœ¬å¯è®¿é—® Node å…¨å±€ä¸ fs/http/httpsï¼Œè¯·è‡ªè¡Œè¯„ä¼°ä¸é™åˆ¶</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>ğŸ§© è§„åˆ™ä¸è„šæœ¬å‚è€ƒ</h3>
                <p>è§„åˆ™å†™æ³•å‚è€ƒ <a href="https://wiki.metacubex.one/config/rules/" target="_blank">Clash Mihomo æ–‡æ¡£</a>ï¼›JS è¯­æ³•å¯å‚è€ƒ <a href="https://www.runoob.com/js/js-tutorial.html" target="_blank">JavaScript æ•™ç¨‹</a>ã€‚</p>
            </div>
        </div>
    </div>
    <script>
        // Language toggle
        function toggleLang() {
            const current = localStorage.getItem('lang') || 'zh';
            const newLang = current === 'zh' ? 'en' : 'zh';
            localStorage.setItem('lang', newLang);
            applyLang(newLang);
        }

        function applyLang(lang) {
            document.querySelectorAll('[data-zh]').forEach(el => {
                el.textContent = el.getAttribute(`data-${lang}`) || el.textContent;
            });
        }

        window.addEventListener('DOMContentLoaded', () => {
            const lang = localStorage.getItem('lang') || 'zh';
            if (lang === 'en') applyLang('en');
        });
    </script>
</body>
</html>
